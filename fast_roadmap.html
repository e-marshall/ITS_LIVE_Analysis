

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>FAST ROADMAP &#8212; ITS_LIVE_TOOL</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'fast_roadmap';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data Preprocessing" href="nbs/05_preprocess.html" />
    <link rel="prev" title="ROADMAP" href="roadmap.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="README-book.html">
  
  
  
  
  
  
    <p class="title logo__title">ITS_LIVE_TOOL</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="README-book.html">
                    Intro
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">ROADMAP</a></li>



<li class="toctree-l1 current active"><a class="current reference internal" href="#">FAST ROADMAP</a></li>



<li class="toctree-l1"><a class="reference internal" href="nbs/05_preprocess.html">Data Preprocessing</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/e-marshall/ITS_LIVE_TOOL/main?urlpath=lab/tree/fast_roadmap.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/e-marshall/ITS_LIVE_TOOL" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/e-marshall/ITS_LIVE_TOOL/issues/new?title=Issue%20on%20page%20%2Ffast_roadmap.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/fast_roadmap.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>FAST ROADMAP</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">FAST ROADMAP</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#about">About</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-access-organization">Data Access + Organization</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#interactive-map-widget">1. Interactive map widget</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#organization-glacier-glacier-centerline-glacier-point-objects">2. Organization: <code class="docutils literal notranslate"><span class="pre">Glacier</span></code>, <code class="docutils literal notranslate"><span class="pre">Glacier_Centerline</span></code>, <code class="docutils literal notranslate"><span class="pre">Glacier_Point</span></code> objects</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-processing">Data Processing</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#inversion">Inversion</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gaussian-process-regression">Gaussian Process Regression</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#processing">Processing</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install">Install</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#section-1-data-access-organization">Section 1: Data Access + Organization</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-use">How to use</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interactive-data-selection-widget">Interactive data selection widget</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-data-objects">Create data objects</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#if-you-ve-only-selected-one-glacier-create-individual-objects-as-follows">If you’ve only selected one glacier, create individual objects as follows:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#if-you-ve-selected-multiple-glaciers-follow-these-examples">If you’ve selected multiple glaciers, follow these examples:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#manually-create-glacier-glacier-point-glacier-centerline-objects">Manually create <code class="docutils literal notranslate"><span class="pre">Glacier</span></code>, <code class="docutils literal notranslate"><span class="pre">Glacier_Point</span></code>, <code class="docutils literal notranslate"><span class="pre">Glacier_Centerline</span></code> objects</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#glacier-point"><code class="docutils literal notranslate"><span class="pre">Glacier_Point</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#glacier-centerline"><code class="docutils literal notranslate"><span class="pre">Glacier_Centerline</span></code></a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#section-2-data-processing">Section 2: Data Processing</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filtering-inspection">Filtering + Inspection</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Gaussian Process Regression</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#problem">Problem:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#raw-data">Raw data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gaussian-process-model-predictions">Gaussian Process model predictions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#section-3-datacube-inversion">Section 3: Datacube Inversion</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#input-your-parameters-below"><strong>Input your parameters below</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-dictionnaries-to-hold-variables-for-each-datacube">Create dictionnaries to hold variables for each datacube</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-glacier-extent-in-datacubes">Get glacier extent in datacubes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#map-the-valid-indices-in-a-new-array">Map the valid indices in a new array</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#design-matrices-for-the-datacubes">Design matrices for the datacubes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-the-host-matrices-and-design-matrix-bricks">Create the host matrices and design matrix bricks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#looper-function-to-run-the-inversion">Looper function to run the inversion</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="fast-roadmap">
<h1>FAST ROADMAP<a class="headerlink" href="#fast-roadmap" title="Permalink to this heading">#</a></h1>
<section id="about">
<h2>About<a class="headerlink" href="#about" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ITS_LIVE_TOOL</span></code> is a package designed to aid users working with the <span class="xref myst">Inter-mission Time Series of Land Ice Velocity and Elevation</span> (ITS_LIVE) dataset. The package provides functions for accessing data as well as various methods to process ITS_LIVE observations. This notebook will demonstrate various elements of the package and walk through the steps of a typical workflow using ITS_LIVE_TOOL.</p>
</section>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>keep this overview here? or move to readme doc</p>
</div>
<p>The tools in the package fall into two main categories: 1) data access + organization, 2) data processing.</p>
<section id="data-access-organization">
<h3>Data Access + Organization<a class="headerlink" href="#data-access-organization" title="Permalink to this heading">#</a></h3>
<section id="interactive-map-widget">
<h4>1. Interactive map widget<a class="headerlink" href="#interactive-map-widget" title="Permalink to this heading">#</a></h4>
<p>This is an interactive widget design to streamline access ITS_LIVE image pair ice velocity time series.</p>
</section>
<section id="organization-glacier-glacier-centerline-glacier-point-objects">
<h4>2. Organization: <code class="docutils literal notranslate"><span class="pre">Glacier</span></code>, <code class="docutils literal notranslate"><span class="pre">Glacier_Centerline</span></code>, <code class="docutils literal notranslate"><span class="pre">Glacier_Point</span></code> objects<a class="headerlink" href="#organization-glacier-glacier-centerline-glacier-point-objects" title="Permalink to this heading">#</a></h4>
<p>These are provided to store and keep track of different types of data related to individual units of analysis such as points, centerlines or full glacier surface areas.</p>
<p>This roadmap document will first demonstrate data access and organization tools before demonstrating the processing tools.</p>
</section>
</section>
<section id="data-processing">
<h3>Data Processing<a class="headerlink" href="#data-processing" title="Permalink to this heading">#</a></h3>
<p>We demonstrate and make available two processing routines. Be sure to check out the accompanying <span class="xref myst">book</span> and consider if either of these are appropriate for your data and use case. Note that these methods are in active development and thus should be considered in <em>beta</em> phase. Please perform your own data inspection and due diligence if implementing these methods.</p>
<section id="inversion">
<h4>Inversion<a class="headerlink" href="#inversion" title="Permalink to this heading">#</a></h4>
<p><strong>to add</strong>
Description – link to full description and examples</p>
</section>
<section id="gaussian-process-regression">
<h4>Gaussian Process Regression<a class="headerlink" href="#gaussian-process-regression" title="Permalink to this heading">#</a></h4>
<p><strong>to add</strong>
Description – link to full description and examples</p>
</section>
</section>
<section id="processing">
<h3>Processing<a class="headerlink" href="#processing" title="Permalink to this heading">#</a></h3>
<p>We demonstrate and make available two processing routines. Be sure to check out the accompanying <span class="xref myst">book</span> and consider if either of these are appropriate for your data and use case. Note that these methods are in active development and thus should be considered in <em>beta</em> phase. Please perform your own data inspection and due diligence if implementing these methods.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ITS_LIVE_TOOL</span> <span class="kn">import</span> <span class="n">datacube_tools</span><span class="p">,</span> <span class="n">interactive</span><span class="p">,</span> <span class="n">obj_setup</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="kn">from</span> <span class="nn">ITS_LIVE_TOOL</span> <span class="kn">import</span> <span class="n">datacube_tools</span><span class="p">,</span> <span class="n">interactive</span><span class="p">,</span> <span class="n">obj_setup</span>

<span class="n">File</span> <span class="o">~/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">phd_work</span><span class="o">/</span><span class="n">ITS_LIVE_TOOL</span><span class="o">/</span><span class="n">ITS_LIVE_TOOL</span><span class="o">/</span><span class="n">datacube_tools</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">13</span>
<span class="g g-Whitespace">     </span><span class="mi">10</span> <span class="c1"># for timing data access</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span> <span class="kn">import</span> <span class="nn">time</span>
<span class="ne">---&gt; </span><span class="mi">13</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="g g-Whitespace">     </span><span class="mi">14</span> <span class="kn">import</span> <span class="nn">pyproj</span>
<span class="g g-Whitespace">     </span><span class="mi">15</span> <span class="kn">import</span> <span class="nn">s3fs</span> <span class="k">as</span> <span class="nn">s3</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;numpy&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pyproj</span>
<span class="kn">import</span> <span class="nn">matplotlib.path</span> <span class="k">as</span> <span class="nn">path</span>
<span class="kn">import</span> <span class="nn">s3fs</span>
<span class="kn">import</span> <span class="nn">zarr</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">scipy</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>
<span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">import</span> <span class="nn">matplotlib.path</span> <span class="k">as</span> <span class="nn">mplp</span>
<span class="kn">import</span> <span class="nn">ipyleaflet</span> <span class="k">as</span> <span class="nn">ipyl</span>
<span class="kn">from</span> <span class="nn">ipyleaflet</span> <span class="kn">import</span> <span class="n">WMSLayer</span>
<span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">ipyw</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">ipyleaflet</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">WMSLayer</span><span class="p">,</span> <span class="n">basemaps</span>
<span class="kn">from</span> <span class="nn">ipywidgets</span> <span class="kn">import</span> <span class="n">HTML</span>
<span class="kn">from</span> <span class="nn">owslib.wms</span> <span class="kn">import</span> <span class="n">WebMapService</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="kn">import</span> <span class="nn">os</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="kn">import</span> <span class="nn">pyproj</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="kn">import</span> <span class="nn">matplotlib.path</span> <span class="k">as</span> <span class="nn">path</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;numpy&#39;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="install">
<h2>Install<a class="headerlink" href="#install" title="Permalink to this heading">#</a></h2>
<p>Install this package using the below command</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>someday we hope to have a pip or conda install, for now use pip install git+ github repo url</p>
</div>
</section>
</section>
<section id="section-1-data-access-organization">
<h1>Section 1: Data Access + Organization<a class="headerlink" href="#section-1-data-access-organization" title="Permalink to this heading">#</a></h1>
<section id="how-to-use">
<h2>How to use<a class="headerlink" href="#how-to-use" title="Permalink to this heading">#</a></h2>
<p>There are two ways to access data using ITS_LIVE_TOOL. The first way is through the interactive widget. This is great for exploratory analysis. The second way is by specifying an RGI ID and point coordinates manually. This is useful if you already know which glacier(s) you want to examine and simply want to pass a list of RGI IDs and coordinates. We’ll first demonstrate using the interactive widget.</p>
</section>
<section id="interactive-data-selection-widget">
<h2>Interactive data selection widget<a class="headerlink" href="#interactive-data-selection-widget" title="Permalink to this heading">#</a></h2>
<p>First, use the interactive map to select data. Do this by right- and left-clicking on the map location where you’d like to access data.
This will return an object containing the coordinates of the point you clicked, a <code class="docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code> of the <a class="reference external" href="http://www.glims.org/rgi_user_guide/welcome.html">RGI7</a> data for that glacier and the URL of the ITS_LIVE granule covering the clicked point.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the glacier you want to study lies in multiple ITS_LIVE granules, or you’d like to look at multiple glaciers, click in multiple points and the output objects will be appended with each click.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#| eval: false</span>
<span class="c1">#| output: false</span>

<span class="n">data_map</span> <span class="o">=</span> <span class="n">interactive</span><span class="o">.</span><span class="n">Widget</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">line</span> <span class="mi">4</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1">#| eval: false</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="c1">#| output: false</span>
<span class="ne">----&gt; </span><span class="mi">4</span> <span class="n">data_map</span> <span class="o">=</span> <span class="n">interactive</span><span class="o">.</span><span class="n">Widget</span><span class="p">()</span>

<span class="ne">NameError</span>: name &#39;interactive&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#| eval: false</span>
<span class="c1">#| output: false</span>

<span class="n">data_map</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">line</span> <span class="mi">4</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1">#| eval: false</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="c1">#| output: false</span>
<span class="ne">----&gt; </span><span class="mi">4</span> <span class="n">data_map</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>

<span class="ne">NameError</span>: name &#39;data_map&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
<section id="create-data-objects">
<h2>Create data objects<a class="headerlink" href="#create-data-objects" title="Permalink to this heading">#</a></h2>
<p>Once you have made your selection(s) on the map, use the following methods to create objects that will store your data</p>
<section id="if-you-ve-only-selected-one-glacier-create-individual-objects-as-follows">
<h3>If you’ve only selected one glacier, create individual objects as follows:<a class="headerlink" href="#if-you-ve-only-selected-one-glacier-create-individual-objects-as-follows" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_map</span><span class="o">.</span><span class="n">urls</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">data_map</span><span class="o">.</span><span class="n">urls</span>

<span class="ne">NameError</span>: name &#39;data_map&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">glacier</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">create_glacier_from_click</span><span class="p">(</span><span class="n">data_map</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">glacier</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">create_glacier_from_click</span><span class="p">(</span><span class="n">data_map</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;obj_setup&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#glacier.itslive_url</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">glacier_point</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">create_glacier_point_from_click</span><span class="p">(</span><span class="n">data_map</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;phony label&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">glacier_point</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">create_glacier_point_from_click</span><span class="p">(</span><span class="n">data_map</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;phony label&#39;</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;obj_setup&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">glacier_centerline</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">create_glacier_centerline_from_click</span><span class="p">(</span><span class="n">data_map</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">glacier_centerline</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">create_glacier_centerline_from_click</span><span class="p">(</span><span class="n">data_map</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;obj_setup&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>As you can see, these objects all store data related to the same glacier that was selected, but at different spatial scales. The <code class="docutils literal notranslate"><span class="pre">glacier</span></code> object contains an RGIID, name and the RGI outline and attributes for that glacier.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">glacier</span><span class="o">.</span><span class="n">outline_prj</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">glacier</span><span class="o">.</span><span class="n">outline_prj</span>

<span class="ne">NameError</span>: name &#39;glacier&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">glacier_point</span></code> object also has the RGI ID and name inherited from the map widget but additionally contains ITS_LIVE image pair velocity time series data for the selected point as well as a 3x3 pixel cube surrounding the point.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">glacier_point</span><span class="o">.</span><span class="n">cube_around_point</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">11</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">glacier_point</span><span class="o">.</span><span class="n">cube_around_point</span>

<span class="ne">NameError</span>: name &#39;glacier_point&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">glacier_centerline</span></code> object contains the same RGIID and name information as the first two objects. In addition, it contains OGGM centerline data that are stored as geopandas GeodataFrames.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">glacier_centerline</span><span class="o">.</span><span class="n">main_centerline</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">12</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">glacier_centerline</span><span class="o">.</span><span class="n">main_centerline</span>

<span class="ne">NameError</span>: name &#39;glacier_centerline&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>Each of these objects are meant to act as cotainers to intuitively and efficiently store different types of data as you process and continue to work with ITS_LIVE data.</p>
<p>The previous steps demonstrated the data access and organization functionality of ITS_LIVE_TOOl. The subsequent sections of this notebook will demonstrate different processing methodologies for working with this dataset.</p>
</section>
<section id="if-you-ve-selected-multiple-glaciers-follow-these-examples">
<h3>If you’ve selected multiple glaciers, follow these examples:<a class="headerlink" href="#if-you-ve-selected-multiple-glaciers-follow-these-examples" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#glacier0, glacier1 = obj_setup.create_multiple_glacier_objs(data_map)[0], obj_setup.create_multiple_glacier_objs(data_map)[1]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#glacier_point_ls = obj_setup.create_multiple_glacier_point_objs(data_map)</span>
<span class="c1">#glacier_pt0, glacier_pt1 = glacier_point_ls[0], glacier_point_ls[1]</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="manually-create-glacier-glacier-point-glacier-centerline-objects">
<h2>Manually create <code class="docutils literal notranslate"><span class="pre">Glacier</span></code>, <code class="docutils literal notranslate"><span class="pre">Glacier_Point</span></code>, <code class="docutils literal notranslate"><span class="pre">Glacier_Centerline</span></code> objects<a class="headerlink" href="#manually-create-glacier-glacier-point-glacier-centerline-objects" title="Permalink to this heading">#</a></h2>
<p>Create objects that contain the clicked data from the above map widget.<br />
These are <code class="docutils literal notranslate"><span class="pre">coords</span></code>, <code class="docutils literal notranslate"><span class="pre">gpdf</span></code>, <code class="docutils literal notranslate"><span class="pre">urls</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">coords</span><span class="p">,</span> <span class="n">gpdf</span><span class="p">,</span> <span class="n">urls</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">return_clicked_info</span><span class="p">(</span><span class="n">data_map</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">15</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">coords</span><span class="p">,</span> <span class="n">gpdf</span><span class="p">,</span> <span class="n">urls</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">return_clicked_info</span><span class="p">(</span><span class="n">data_map</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;obj_setup&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">coords</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">16</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">coords</span>

<span class="ne">NameError</span>: name &#39;coords&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;label&#39;</span>
<span class="n">var_ls</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">,</span><span class="s1">&#39;vy&#39;</span><span class="p">,</span><span class="s1">&#39;vx&#39;</span><span class="p">,</span><span class="s1">&#39;v_error&#39;</span><span class="p">,</span><span class="s1">&#39;mapping&#39;</span><span class="p">,</span><span class="s1">&#39;satellite_img1&#39;</span><span class="p">,</span><span class="s1">&#39;satellite_img2&#39;</span><span class="p">,</span><span class="s1">&#39;acquisition_date_img1&#39;</span><span class="p">,</span> <span class="s1">&#39;acquisition_date_img2&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">glacier_manual</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">Glacier</span><span class="p">(</span><span class="n">gpdf</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;NAME&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">gpdf</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;RGIID&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="n">gpdf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">estimate_utm_crs</span><span class="p">()),</span> <span class="s1">&#39;manual&#39;</span><span class="p">,</span> <span class="n">rgi_outline_from_widget</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">18</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">glacier_manual</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">Glacier</span><span class="p">(</span><span class="n">gpdf</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;NAME&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">gpdf</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;RGIID&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="n">gpdf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">estimate_utm_crs</span><span class="p">()),</span> <span class="s1">&#39;manual&#39;</span><span class="p">,</span> <span class="n">rgi_outline_from_widget</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;obj_setup&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">glacier_manual</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">19</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">glacier_manual</span><span class="o">.</span><span class="n">name</span>

<span class="ne">NameError</span>: name &#39;glacier_manual&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">glacier_manual</span><span class="o">.</span><span class="n">rgi_id</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">20</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">glacier_manual</span><span class="o">.</span><span class="n">rgi_id</span>

<span class="ne">NameError</span>: name &#39;glacier_manual&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">glacier_manual</span><span class="o">.</span><span class="n">outline_prj</span><span class="o">.</span><span class="n">crs</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">21</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">glacier_manual</span><span class="o">.</span><span class="n">outline_prj</span><span class="o">.</span><span class="n">crs</span>

<span class="ne">NameError</span>: name &#39;glacier_manual&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">glacier_pt</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">Glacier_Point</span><span class="p">(</span><span class="n">glacier</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;acc. zone&#39;</span><span class="p">,</span> <span class="n">glacier</span><span class="o">.</span><span class="n">rgi_id</span><span class="p">,</span> <span class="p">[</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]],</span> <span class="n">var_ls</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">22</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">glacier_pt</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">Glacier_Point</span><span class="p">(</span><span class="n">glacier</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;acc. zone&#39;</span><span class="p">,</span> <span class="n">glacier</span><span class="o">.</span><span class="n">rgi_id</span><span class="p">,</span> <span class="p">[</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]],</span> <span class="n">var_ls</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;obj_setup&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">glacier_centerline</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">Glacier_Centerline</span><span class="p">(</span><span class="s1">&#39;Jorge Montt&#39;</span><span class="p">,</span> <span class="s1">&#39;RGI60-17.06074&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">23</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">glacier_centerline</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">Glacier_Centerline</span><span class="p">(</span><span class="s1">&#39;Jorge Montt&#39;</span><span class="p">,</span> <span class="s1">&#39;RGI60-17.06074&#39;</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;obj_setup&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
<section id="glacier-point">
<h2><code class="docutils literal notranslate"><span class="pre">Glacier_Point</span></code><a class="headerlink" href="#glacier-point" title="Permalink to this heading">#</a></h2>
<p>This object inherits name and RGIID attributes from the <code class="docutils literal notranslate"><span class="pre">Glacier</span></code> object described aboev (or you can input them manually). It takes the coordinate information specified in the widget and list of variables of interest and returns an object containing ITS_LIVE image pair time series datasets for the specified point anda 3x3 pixel cube surrounding the specified point. Check out the docs for a description of all of the attributes and methods associated with this object.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">coords</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">24</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">coords</span>

<span class="ne">NameError</span>: name &#39;coords&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">glacier_pt</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">Glacier_Point</span><span class="p">(</span><span class="n">glacier</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;acc. zone&#39;</span><span class="p">,</span> <span class="n">glacier</span><span class="o">.</span><span class="n">rgi_id</span><span class="p">,</span> <span class="p">[</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]],</span> <span class="n">var_ls</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">25</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">glacier_pt</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">Glacier_Point</span><span class="p">(</span><span class="n">glacier</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;acc. zone&#39;</span><span class="p">,</span> <span class="n">glacier</span><span class="o">.</span><span class="n">rgi_id</span><span class="p">,</span> <span class="p">[</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]],</span> <span class="n">var_ls</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;obj_setup&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">glacier_pt</span><span class="o">.</span><span class="n">cube_around_point</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">26</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">glacier_pt</span><span class="o">.</span><span class="n">cube_around_point</span>

<span class="ne">NameError</span>: name &#39;glacier_pt&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">glacier_pt</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">27</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">glacier_pt</span>

<span class="ne">NameError</span>: name &#39;glacier_pt&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
<section id="glacier-centerline">
<h2><code class="docutils literal notranslate"><span class="pre">Glacier_Centerline</span></code><a class="headerlink" href="#glacier-centerline" title="Permalink to this heading">#</a></h2>
<p>Similarly to the <code class="docutils literal notranslate"><span class="pre">Glacier_Point</span></code> object, a <code class="docutils literal notranslate"><span class="pre">Glacier_Centerline</span></code> object inherits some basic information from a <code class="docutils literal notranslate"><span class="pre">Glacier</span></code> object, but this can also be specified manually if you don’t want to create a <code class="docutils literal notranslate"><span class="pre">Glacier</span></code> method beforehand. A <code class="docutils literal notranslate"><span class="pre">Glacier_Centerline</span></code> object has attributes called <code class="docutils literal notranslate"><span class="pre">centerlines</span></code> and <code class="docutils literal notranslate"><span class="pre">main_centerline</span></code>. These are both <code class="docutils literal notranslate"><span class="pre">Geopandas.GeoDataframe</span></code> objects containing OGGM flowline data associated with this glacier. They also contain ITS_LIVE image pair velocity time series clipped to the centerline (<strong>still being implemented</strong>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">glacier_centerline</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">Glacier_Centerline</span><span class="p">(</span><span class="s1">&#39;Jorge Montt&#39;</span><span class="p">,</span> <span class="s1">&#39;RGI60-17.06074&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">28</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">glacier_centerline</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">Glacier_Centerline</span><span class="p">(</span><span class="s1">&#39;Jorge Montt&#39;</span><span class="p">,</span> <span class="s1">&#39;RGI60-17.06074&#39;</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;obj_setup&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">glacier_centerline</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">29</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">glacier_centerline</span>

<span class="ne">NameError</span>: name &#39;glacier_centerline&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>Each of these objects are meant to act as cotainers to intuitively and efficiently store different types of data as you process and continue to work with ITS_LIVE data.</p>
<p>The previous steps demonstrated the data access and organization functionality of ITS_LIVE_TOOl. The subsequent sections of this notebook will demonstrate different processing methodologies for working with this dataset.</p>
</section>
</section>
<section id="section-2-data-processing">
<h1>Section 2: Data Processing<a class="headerlink" href="#section-2-data-processing" title="Permalink to this heading">#</a></h1>
<section id="filtering-inspection">
<h2>Filtering + Inspection<a class="headerlink" href="#filtering-inspection" title="Permalink to this heading">#</a></h2>
<p>Examples of situations where outlier detection may be necessary. We present 3 methods for outlier detection.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>add images of figures from notebook here ?</p>
</div>
</section>
<section id="id1">
<h2>Gaussian Process Regression<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h2>
<p>We demonstrate a method to develop and apply a Gaussian Process model on ITS_LIVE point time series data. Gaussian Process are a non-parametric, Bayesion regression method to model a latent function such as glacier surface velocity with respect to time, given observations of ice movement over different time periods.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method is in active development and should currently be considered to be in ‘beta’ mode. We provide an example of its implementation but stress that it may not be suitable to apply in other scenarios. Please carefully inspect your dataset and the model parameters to be sure it is appropriate before using in your workflows</p>
</div>
<section id="problem">
<h3>Problem:<a class="headerlink" href="#problem" title="Permalink to this heading">#</a></h3>
<p>ITS_LIVE image pair ice velocity time series provide estimates of ice movement over a broad range of temporal baselines (number of days between image pairs). The estimates describe different types of ice movement given different temporal baselines and contain noise inherent to sensor algorithmic limitations. Given this complex, noisy dataset, we would like to employ a regression approach to reach an estimate of an underlying velocity function with inherent uncertainty quantifications.</p>
</section>
<section id="raw-data">
<h3>Raw data<a class="headerlink" href="#raw-data" title="Permalink to this heading">#</a></h3>
<p><img alt="ITS_LIVE velocity observations for a single point" src="https://github.com/e-marshall/ITS_LIVE_TOOL/blob/main/figs/baltoro_raw_data_example.png?raw=true" /></p>
</section>
<section id="gaussian-process-model-predictions">
<h3>Gaussian Process model predictions<a class="headerlink" href="#gaussian-process-model-predictions" title="Permalink to this heading">#</a></h3>
<p><img alt="Velocity time series predicted by Gaussian Process model based on ITS_LIVE velocity observations" src="https://github.com/e-marshall/ITS_LIVE_TOOL/blob/main/figs/baltoro_gp_example_results.png?raw=true" /></p>
</section>
</section>
</section>
<section id="section-3-datacube-inversion">
<h1>Section 3: Datacube Inversion<a class="headerlink" href="#section-3-datacube-inversion" title="Permalink to this heading">#</a></h1>
<section id="input-your-parameters-below">
<h2><strong>Input your parameters below</strong><a class="headerlink" href="#input-your-parameters-below" title="Permalink to this heading">#</a></h2>
<p><em>Useful information:</em></p>
<ul class="simple">
<li><p>GPU generally runs the inversion faster, but might be slower when using the spatial regularization.</p></li>
<li><p>High lambda encouraged for non-surging glacier</p></li>
<li><p>spatial_shape ‘cross’ is hard-coded because ‘ring’ would take a lot of RAM and the code would be much more complicated.</p></li>
<li><p>spatial_regularization: False if you want a faster computation, slightly less accurate.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># In case you didn&#39;t run the cell that grabs the urls</span>
<span class="n">coords</span><span class="p">,</span> <span class="n">gpdf</span><span class="p">,</span> <span class="n">urls</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">return_clicked_info</span><span class="p">(</span><span class="n">data_map</span><span class="p">)</span>

<span class="c1"># In case you haven&#39;t created the centerline</span>
<span class="n">glacier_centerline</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">create_glacier_centerline_from_click</span><span class="p">(</span><span class="n">data_map</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1">###### INPUT YOUR PARAMETERS #######</span>

<span class="n">name_cube</span> <span class="o">=</span> <span class="s1">&#39;Seward&#39;</span> <span class="c1"># Name of the dataset</span>

<span class="n">mission</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1"># &#39;None&#39; if you want all the data, &#39;S1&#39; for Sentinel-1 only, &#39;L&#39; for Landsat only, etc.. .</span>

<span class="n">lamb</span> <span class="o">=</span> <span class="mi">5</span> <span class="c1"># Smoothing coefficient: the higher the value, the more the inversion favors a smooth output. BAD for surging glaciers, GOOD for non-surging glaciers</span>

<span class="n">derivative</span> <span class="o">=</span> <span class="mi">2</span> <span class="c1"># Derivative degree for the inversion. Doesn&#39;t change much unless you have a specific reason to choose 1 or 2 (1st or 2nd derivative)</span>

<span class="n">day_interval</span> <span class="o">=</span> <span class="mi">60</span> <span class="c1"># Amount of days in between each inversion value. The higher, the faster the inversion. But you also lose in temporal resolution. 12 here because Sentinel-1 repeat-time is 12.</span>

<span class="n">sdate</span> <span class="o">=</span> <span class="s1">&#39;2019-01-01&#39;</span> <span class="c1"># Start date, format &#39;YYYY-MM-DD&#39; OR None if you want to grab the entire timeseries available</span>

<span class="n">edate</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1"># End date, format &#39;YYYY-MM-DD&#39; OR None if you want to grab the entire timeseries available</span>

<span class="n">GPU</span> <span class="o">=</span> <span class="kc">True</span> <span class="c1"># True if you want to use GPU, False if you want to use CPU</span>

<span class="n">spatial_regularization</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># True if you want to use spatial regularization, False if you only want to use temporal regularization</span>

<span class="k">if</span> <span class="n">spatial_regularization</span><span class="p">:</span>
    <span class="n">derivative</span> <span class="o">=</span> <span class="mi">2</span> <span class="c1"># It is better to do a central difference scheme than forward difference in this case</span>
    <span class="n">spatial_shape</span> <span class="o">=</span> <span class="s1">&#39;cross&#39;</span> <span class="c1"># &#39;ring&#39; has not been implemented yet, and tests show a huge in increase in computation time</span>
    <span class="n">nb_pts_tot</span> <span class="o">=</span> <span class="mi">5</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">nb_pts_tot</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">spatial_shape</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">30</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># In case you didn&#39;t run the cell that grabs the urls</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">coords</span><span class="p">,</span> <span class="n">gpdf</span><span class="p">,</span> <span class="n">urls</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">return_clicked_info</span><span class="p">(</span><span class="n">data_map</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="c1"># In case you haven&#39;t created the centerline</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="n">glacier_centerline</span> <span class="o">=</span> <span class="n">obj_setup</span><span class="o">.</span><span class="n">create_glacier_centerline_from_click</span><span class="p">(</span><span class="n">data_map</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;obj_setup&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#data_map = interactive.Widget()</span>
<span class="c1">#data_map.display()</span>
</pre></div>
</div>
</div>
</div>
<section id="create-dictionnaries-to-hold-variables-for-each-datacube">
<h3>Create dictionnaries to hold variables for each datacube<a class="headerlink" href="#create-dictionnaries-to-hold-variables-for-each-datacube" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">X_tot</span><span class="p">,</span> <span class="n">Y_tot</span><span class="p">,</span> <span class="n">X_valid</span><span class="p">,</span> <span class="n">Y_valid</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">,</span> <span class="n">urls</span> <span class="o">=</span> <span class="n">invert</span><span class="o">.</span><span class="n">create_data_dict</span><span class="p">(</span><span class="n">urls</span><span class="p">,</span> <span class="n">mission</span><span class="p">,</span> <span class="n">lamb</span><span class="p">,</span> <span class="n">derivative</span><span class="p">,</span> <span class="n">day_interval</span><span class="p">,</span> <span class="n">data_map</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">32</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">X_tot</span><span class="p">,</span> <span class="n">Y_tot</span><span class="p">,</span> <span class="n">X_valid</span><span class="p">,</span> <span class="n">Y_valid</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">,</span> <span class="n">urls</span> <span class="o">=</span> <span class="n">invert</span><span class="o">.</span><span class="n">create_data_dict</span><span class="p">(</span><span class="n">urls</span><span class="p">,</span> <span class="n">mission</span><span class="p">,</span> <span class="n">lamb</span><span class="p">,</span> <span class="n">derivative</span><span class="p">,</span> <span class="n">day_interval</span><span class="p">,</span> <span class="n">data_map</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;invert&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
<section id="get-glacier-extent-in-datacubes">
<h3>Get glacier extent in datacubes<a class="headerlink" href="#get-glacier-extent-in-datacubes" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">urls</span><span class="p">))):</span>
    <span class="n">X_tot</span><span class="p">,</span> <span class="n">Y_tot</span><span class="p">,</span> <span class="n">X_valid</span><span class="p">,</span> <span class="n">Y_valid</span> <span class="o">=</span> <span class="n">invert</span><span class="o">.</span><span class="n">get_extents</span><span class="p">(</span><span class="n">urls</span><span class="p">[</span><span class="n">url</span><span class="p">],</span> <span class="n">X_tot</span><span class="p">,</span> <span class="n">Y_tot</span><span class="p">,</span> <span class="n">X_valid</span><span class="p">,</span> <span class="n">Y_valid</span><span class="p">,</span> <span class="n">mission</span><span class="p">,</span> <span class="n">lamb</span><span class="p">,</span> <span class="n">derivative</span><span class="p">,</span> <span class="n">day_interval</span><span class="p">,</span> <span class="n">data_map</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">33</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">urls</span><span class="p">))):</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span>     <span class="n">X_tot</span><span class="p">,</span> <span class="n">Y_tot</span><span class="p">,</span> <span class="n">X_valid</span><span class="p">,</span> <span class="n">Y_valid</span> <span class="o">=</span> <span class="n">invert</span><span class="o">.</span><span class="n">get_extents</span><span class="p">(</span><span class="n">urls</span><span class="p">[</span><span class="n">url</span><span class="p">],</span> <span class="n">X_tot</span><span class="p">,</span> <span class="n">Y_tot</span><span class="p">,</span> <span class="n">X_valid</span><span class="p">,</span> <span class="n">Y_valid</span><span class="p">,</span> <span class="n">mission</span><span class="p">,</span> <span class="n">lamb</span><span class="p">,</span> <span class="n">derivative</span><span class="p">,</span> <span class="n">day_interval</span><span class="p">,</span> <span class="n">data_map</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;tqdm&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
<section id="map-the-valid-indices-in-a-new-array">
<h3>Map the valid indices in a new array<a class="headerlink" href="#map-the-valid-indices-in-a-new-array" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">space_interval</span><span class="p">,</span> <span class="n">min_date</span><span class="p">,</span> <span class="n">max_date</span><span class="p">,</span> <span class="n">template</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">neighbor_idx</span><span class="p">,</span> <span class="n">x_indices_centerline</span><span class="p">,</span> <span class="n">y_indices_centerline</span><span class="p">,</span> <span class="n">X_arr</span><span class="p">,</span> <span class="n">X_MIN</span><span class="p">,</span> <span class="n">X_MAX</span><span class="p">,</span> <span class="n">Y_arr</span><span class="p">,</span> <span class="n">Y_MIN</span><span class="p">,</span> <span class="n">Y_MAX</span><span class="p">,</span> <span class="n">x_matches</span><span class="p">,</span> <span class="n">y_matches</span> <span class="o">=</span> <span class="n">invert</span><span class="o">.</span><span class="n">cubes_intersection</span><span class="p">(</span><span class="n">X_tot</span><span class="p">,</span> <span class="n">Y_tot</span><span class="p">,</span> <span class="n">X_valid</span><span class="p">,</span> <span class="n">Y_valid</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">,</span> <span class="n">urls</span><span class="p">,</span> <span class="n">spatial_regularization</span><span class="p">,</span> <span class="n">mission</span><span class="p">,</span> <span class="n">lamb</span><span class="p">,</span> <span class="n">derivative</span><span class="p">,</span> <span class="n">day_interval</span><span class="p">,</span> <span class="n">sdate</span><span class="p">,</span> <span class="n">edate</span><span class="p">,</span> <span class="n">nb_pts_tot</span><span class="p">,</span> <span class="n">glacier_centerline</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">34</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">space_interval</span><span class="p">,</span> <span class="n">min_date</span><span class="p">,</span> <span class="n">max_date</span><span class="p">,</span> <span class="n">template</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">neighbor_idx</span><span class="p">,</span> <span class="n">x_indices_centerline</span><span class="p">,</span> <span class="n">y_indices_centerline</span><span class="p">,</span> <span class="n">X_arr</span><span class="p">,</span> <span class="n">X_MIN</span><span class="p">,</span> <span class="n">X_MAX</span><span class="p">,</span> <span class="n">Y_arr</span><span class="p">,</span> <span class="n">Y_MIN</span><span class="p">,</span> <span class="n">Y_MAX</span><span class="p">,</span> <span class="n">x_matches</span><span class="p">,</span> <span class="n">y_matches</span> <span class="o">=</span> <span class="n">invert</span><span class="o">.</span><span class="n">cubes_intersection</span><span class="p">(</span><span class="n">X_tot</span><span class="p">,</span> <span class="n">Y_tot</span><span class="p">,</span> <span class="n">X_valid</span><span class="p">,</span> <span class="n">Y_valid</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">,</span> <span class="n">urls</span><span class="p">,</span> <span class="n">spatial_regularization</span><span class="p">,</span> <span class="n">mission</span><span class="p">,</span> <span class="n">lamb</span><span class="p">,</span> <span class="n">derivative</span><span class="p">,</span> <span class="n">day_interval</span><span class="p">,</span> <span class="n">sdate</span><span class="p">,</span> <span class="n">edate</span><span class="p">,</span> <span class="n">nb_pts_tot</span><span class="p">,</span> <span class="n">glacier_centerline</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;invert&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
<section id="design-matrices-for-the-datacubes">
<h3>Design matrices for the datacubes<a class="headerlink" href="#design-matrices-for-the-datacubes" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reg_mat_space</span><span class="p">,</span> <span class="n">reg_mat_time</span><span class="p">,</span> <span class="n">dates_nonum</span><span class="p">,</span> <span class="n">dates</span><span class="p">,</span> <span class="n">data_dict</span> <span class="o">=</span> <span class="n">invert</span><span class="o">.</span><span class="n">design_matrices</span><span class="p">(</span><span class="n">urls</span><span class="p">,</span> <span class="n">min_date</span><span class="p">,</span> <span class="n">max_date</span><span class="p">,</span> <span class="n">mission</span><span class="p">,</span> <span class="n">lamb</span><span class="p">,</span> <span class="n">derivative</span><span class="p">,</span> <span class="n">day_interval</span><span class="p">,</span> <span class="n">space_interval</span><span class="p">,</span> <span class="n">sdate</span><span class="p">,</span> <span class="n">edate</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">35</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">reg_mat_space</span><span class="p">,</span> <span class="n">reg_mat_time</span><span class="p">,</span> <span class="n">dates_nonum</span><span class="p">,</span> <span class="n">dates</span><span class="p">,</span> <span class="n">data_dict</span> <span class="o">=</span> <span class="n">invert</span><span class="o">.</span><span class="n">design_matrices</span><span class="p">(</span><span class="n">urls</span><span class="p">,</span> <span class="n">min_date</span><span class="p">,</span> <span class="n">max_date</span><span class="p">,</span> <span class="n">mission</span><span class="p">,</span> <span class="n">lamb</span><span class="p">,</span> <span class="n">derivative</span><span class="p">,</span> <span class="n">day_interval</span><span class="p">,</span> <span class="n">space_interval</span><span class="p">,</span> <span class="n">sdate</span><span class="p">,</span> <span class="n">edate</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;invert&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
<section id="create-the-host-matrices-and-design-matrix-bricks">
<h3>Create the host matrices and design matrix bricks<a class="headerlink" href="#create-the-host-matrices-and-design-matrix-bricks" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vxInv</span><span class="p">,</span> <span class="n">vyInv</span><span class="p">,</span> <span class="n">len_pt_inverted</span><span class="p">,</span> <span class="n">SRT</span><span class="p">,</span> <span class="n">SRS</span><span class="p">,</span> <span class="n">space_reg_mat</span><span class="p">,</span> <span class="n">time_reg_mat</span> <span class="o">=</span>  <span class="n">invert</span><span class="o">.</span><span class="n">extend_Matrices</span><span class="p">(</span><span class="n">reg_mat_time</span><span class="p">,</span> <span class="n">nb_pts_tot</span><span class="p">,</span> <span class="n">reg_mat_space</span><span class="p">,</span> <span class="n">spatial_regularization</span><span class="p">,</span> <span class="n">dates</span><span class="p">,</span> <span class="n">template</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">36</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">vxInv</span><span class="p">,</span> <span class="n">vyInv</span><span class="p">,</span> <span class="n">len_pt_inverted</span><span class="p">,</span> <span class="n">SRT</span><span class="p">,</span> <span class="n">SRS</span><span class="p">,</span> <span class="n">space_reg_mat</span><span class="p">,</span> <span class="n">time_reg_mat</span> <span class="o">=</span>  <span class="n">invert</span><span class="o">.</span><span class="n">extend_Matrices</span><span class="p">(</span><span class="n">reg_mat_time</span><span class="p">,</span> <span class="n">nb_pts_tot</span><span class="p">,</span> <span class="n">reg_mat_space</span><span class="p">,</span> <span class="n">spatial_regularization</span><span class="p">,</span> <span class="n">dates</span><span class="p">,</span> <span class="n">template</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;invert&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
<section id="looper-function-to-run-the-inversion">
<h3>Looper function to run the inversion<a class="headerlink" href="#looper-function-to-run-the-inversion" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Determine the GPU in your system if you have one</span>
<span class="k">if</span> <span class="n">GPU</span><span class="p">:</span>     
    <span class="kn">import</span> <span class="nn">torch</span>
    <span class="n">device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cuda:0&quot;</span> <span class="k">if</span> <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">is_available</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;cpu&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">device</span> <span class="o">=</span> <span class="kc">None</span>

<span class="c1"># Run the inversions for vx and vy and populate vxInv, vyInv</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y_matches</span><span class="p">))):</span>

    <span class="n">vxInv</span><span class="p">,</span> <span class="n">vyInv</span> <span class="o">=</span> <span class="n">invert</span><span class="o">.</span><span class="n">looper</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">name_cube</span><span class="p">,</span> <span class="n">vxInv</span><span class="p">,</span> <span class="n">vyInv</span><span class="p">,</span> <span class="n">GPU</span><span class="p">,</span> <span class="n">spatial_regularization</span><span class="p">,</span> <span class="n">nb_pts_tot</span><span class="p">,</span> <span class="n">time_reg_mat</span><span class="p">,</span> <span class="n">space_reg_mat</span><span class="p">,</span> <span class="n">len_pt_inverted</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">,</span> <span class="n">urls</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">neighbor_idx</span><span class="p">,</span> <span class="n">x_matches</span><span class="p">,</span> <span class="n">y_matches</span><span class="p">,</span> <span class="n">X_arr</span><span class="p">,</span> <span class="n">X_MIN</span><span class="p">,</span> <span class="n">X_MAX</span><span class="p">,</span> <span class="n">Y_arr</span><span class="p">,</span> <span class="n">Y_MIN</span><span class="p">,</span> <span class="n">Y_MAX</span><span class="p">,</span> <span class="n">device</span><span class="p">,</span> <span class="n">dates_nonum</span><span class="p">,</span> <span class="n">x_indices_centerline</span><span class="p">,</span> <span class="n">y_indices_centerline</span><span class="p">,</span> <span class="n">SRT</span><span class="p">,</span> <span class="n">SRS</span><span class="p">)</span>
    
<span class="n">invert</span><span class="o">.</span><span class="n">save_dataset</span><span class="p">(</span><span class="n">name_cube</span><span class="p">,</span> <span class="n">vxInv</span><span class="p">,</span> <span class="n">vyInv</span><span class="p">,</span> <span class="n">dates_nonum</span><span class="p">,</span> <span class="n">X_arr</span><span class="p">,</span> <span class="n">Y_arr</span><span class="p">,</span> <span class="n">X_MIN</span><span class="p">,</span> <span class="n">X_MAX</span><span class="p">,</span> <span class="n">Y_MIN</span><span class="p">,</span> <span class="n">Y_MAX</span><span class="p">,</span> <span class="n">x_indices_centerline</span><span class="p">,</span> <span class="n">y_indices_centerline</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">,</span> <span class="n">urls</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">37</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># Determine the GPU in your system if you have one</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="k">if</span> <span class="n">GPU</span><span class="p">:</span>     
<span class="g g-Whitespace">      </span><span class="mi">3</span>     <span class="kn">import</span> <span class="nn">torch</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>     <span class="n">device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cuda:0&quot;</span> <span class="k">if</span> <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">is_available</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;cpu&quot;</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;GPU&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="roadmap.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">ROADMAP</p>
      </div>
    </a>
    <a class="right-next"
       href="nbs/05_preprocess.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Data Preprocessing</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">FAST ROADMAP</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#about">About</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-access-organization">Data Access + Organization</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#interactive-map-widget">1. Interactive map widget</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#organization-glacier-glacier-centerline-glacier-point-objects">2. Organization: <code class="docutils literal notranslate"><span class="pre">Glacier</span></code>, <code class="docutils literal notranslate"><span class="pre">Glacier_Centerline</span></code>, <code class="docutils literal notranslate"><span class="pre">Glacier_Point</span></code> objects</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-processing">Data Processing</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#inversion">Inversion</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gaussian-process-regression">Gaussian Process Regression</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#processing">Processing</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install">Install</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#section-1-data-access-organization">Section 1: Data Access + Organization</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-use">How to use</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interactive-data-selection-widget">Interactive data selection widget</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-data-objects">Create data objects</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#if-you-ve-only-selected-one-glacier-create-individual-objects-as-follows">If you’ve only selected one glacier, create individual objects as follows:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#if-you-ve-selected-multiple-glaciers-follow-these-examples">If you’ve selected multiple glaciers, follow these examples:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#manually-create-glacier-glacier-point-glacier-centerline-objects">Manually create <code class="docutils literal notranslate"><span class="pre">Glacier</span></code>, <code class="docutils literal notranslate"><span class="pre">Glacier_Point</span></code>, <code class="docutils literal notranslate"><span class="pre">Glacier_Centerline</span></code> objects</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#glacier-point"><code class="docutils literal notranslate"><span class="pre">Glacier_Point</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#glacier-centerline"><code class="docutils literal notranslate"><span class="pre">Glacier_Centerline</span></code></a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#section-2-data-processing">Section 2: Data Processing</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filtering-inspection">Filtering + Inspection</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Gaussian Process Regression</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#problem">Problem:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#raw-data">Raw data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gaussian-process-model-predictions">Gaussian Process model predictions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#section-3-datacube-inversion">Section 3: Datacube Inversion</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#input-your-parameters-below"><strong>Input your parameters below</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-dictionnaries-to-hold-variables-for-each-datacube">Create dictionnaries to hold variables for each datacube</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-glacier-extent-in-datacubes">Get glacier extent in datacubes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#map-the-valid-indices-in-a-new-array">Map the valid indices in a new array</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#design-matrices-for-the-datacubes">Design matrices for the datacubes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-the-host-matrices-and-design-matrix-bricks">Create the host matrices and design matrix bricks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#looper-function-to-run-the-inversion">Looper function to run the inversion</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Victor Devaux-Chupin, Emma Marshall
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>